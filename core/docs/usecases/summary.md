- コードとクラスモデル図の同期を取れるフリーのモデル図作成ツールが欲しい。

- モデルの配置や、メモの追加等の変更したあとコードと同期を取っても、配置やメモが維持されてほしい。
  コードからモデル図生成
  モデルの配置、メモとかを追加
  コード変更
  コードからモデルを追加するが、既存のモデル図の配置は変更されない。

- 注目させたいクラスと関連の深さ、フィルターを DSL 等で指定すると、適切に抽出されたモデル図が生成される

  - 既存ツールだと全コードを対象にしたりするのでめちゃでかい図や、標準クラスとかノイズなクラスとの大量の関連がでがち

- TypeScript の型(Union 型等)に対応している。

- リファクタリング前後の状態を比較できるモデル図が作成できる

- 神クラスをリファクタリングする際に必要な補助資料の作成

- OSS 等のコードリーディング補助
  中心と思われるクラスを類推し、関連を並べて見ることで理解を深める

  - OSS 等のクラス図ベースの説明資料の補助資料作成

### 設定 DSL イメージ

```ts
// id,label を設定。 id はファイル名、ラベルはリンク等に使用
file('summary','設計概要'){
  // 配置は 3x3 の 9マス位を想定
  sheet('main_summary','主要クラス概要'){
    // 関連を追う深さ(depth)等 の デフォルト値を上書きしたかったら下記のように設定する
    center(Center,{depth:2})
  }

  sheet('hoge','Topクラス概要'){
    center(Top)
    right(TopRight)
    left(TopLeft)
    bottom(Center)
    // top()
    // topLeft()
    // topRight()
    // ...
  }
}

```

summary.drawio というファイルに「主要クラス概要」「Center クラス概要」というシートができる

### 想定シナリオ

レガシーコードのリファクタリングを依頼される。

#### レガシーコードのリファクタリングを依頼される。

分析者がざっとコードリーディングして神クラス候補を発見する。

分析者が神クラスから関連深度 3 のクラスをすべて表示する DSL を作成する

システムは DSL をもとにクラス図を作成する

分析者が神クラスから関連を切ったほうが良いクラスをいくつか抽出

### 実現手段

drawio で生成されるファイルが XML なので、なんか XML 書き換えで上記要件は満たされそうと考えた。
実装を追っていったら [ mxgraph ](https://github.com/maxGraph/maxGraph) というライブラリで、XML を生成しているっぽい。

競合

### 競合

- plantuml

- jig

有料

- Aster
- Enterprise Architect

###

###

###

###

###

###

###
